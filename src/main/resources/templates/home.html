<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WORD YACHT - Menú</title>
	<link th:href="@{bootstrap/4.3.1/css/bootstrap.min.css}" rel="stylesheet" id="bootstrap-css">
	<link th:href="@{styles/home.css}" rel="stylesheet">
	<script th:src="@{js/jquery-3.6.1.min.js}"></script>
	<script th:src="@{bootstrap/4.3.1/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{js/home.js}"></script>
	<script th:inline="javascript">
    	let codigos = /*[[${codigos}]]*/ ''
    	let idUser = /*[[${usuario.idUsuario}]]*/ ''
    </script>
	<meta name="_csrf" th:content="${_csrf.token}">
	<meta name="_csrf_header" th:content="${_csrf.headerName}">
</head>

<body>
	<div class="admin">
		<div><a type="button" id="gestionarPalabras" data-toggle="modal" data-target="#modalGestionarPalabras"
				sec:authorize="hasRole('admin')">Gestionar palabras</a></div>
		<div><a type="button" id="verUsuarios" data-toggle="modal" data-target="#modalVerUsuarios"
				sec:authorize="hasRole('admin')">Gestionar usuarios</a></div>
	</div>

	<div class="menu">
		<div class="titulo"></div>
		<a type="button" class="boton bs" href="#" data-toggle="modal" data-target="#modalMiPerfil" id="perfil">Mi
			perfil</a>
		<a type="button" class="boton bs" href="#" data-toggle="modal" data-target="#modalEstadisticas"
			id="estadisticas">Ranking</a>
		<a type="button" class="boton bm" href="#" data-toggle="modal" data-target="#modalComoJugar" id="comoJugar">Como
			Jugar</a>
		<a type="button" class="boton bm" href="#" data-toggle="modal" data-target="#modalPrivada" id="privada">Partida
			privada</a>
		<a type="button" class="boton bl" th:href="@{/joinPublic?idUser={id}(id=${usuario.idUsuario})}" id="jugar">Jugar</a>
	</div>
	</div>

	<div class="modal" id="modalMiPerfil">
		<div class="modal-dialog modal-dialog-centered modal-lg" style="max-width: 600px;">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Mi Perfil</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col">
							<div id="avatar"
								th:style="'background-image: url(\''+@{/img/{parametro}(parametro=${usuario.avatar}+'.png')}+'\');'">
							</div>
							<div>Nombre de Usuario: <span sec:authentication="principal.username"></span></div>
							<div>Nombre: <span th:text="${usuario.nombre}"></span></div>
							<div>Apellidos: <span th:text="${usuario.apellidos}"></span></div>
							<div>E-Mail: <span th:text="${usuario.email}"></span></div>
							<div>Puntaje total: <span th:text="${usuario.acumulado}"></span></div>
						</div>
						<div class="col" id="elegirAvatar">
							<p>Elegir Avatar:</p>
							<div th:each="numero : ${#numbers.sequence(1, 5)}">
								<a class="botonAvatar"
									th:style="'background-image: url(\''+@{/img/{parametro}(parametro=${numero}+'.png')}+'\');'"
									type="button"></a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
					<button type="button" class="btn btn-success" id="guardarAvatar" data-dismiss="modal">Guardar y
						cerrar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal" id="modalPrivada">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Partida privada</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body row">
					<div class="col">
						<fieldset class="border p-3 col">
							<legend class="w-auto">Crear partida</legend>
							<a th:href="@{/createPrivate?idUser={id}(id=${usuario.idUsuario})}" class="btn btn-primary mb-2 col-sm" type="button">Unirse</a>
							<label class="col-sm text-center"></label>
						</fieldset>
					</div>
					<div class="col">
						<fieldset class="border p-3 col">
							<legend class="w-auto">Unirse a partida</legend>
							<input id="codigo" class="form-control mb-2 col-sm text-center" placeholder="Introducir código">
							<a id="unirsePrivada" class="btn btn-primary mb-2 col-sm" type="button">Unirse</a>
							<label id="errorCodigo" class="col-sm text-center"></label>
						</fieldset>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal" id="modalComoJugar">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Como Jugar</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal" id="modalGestionarPalabras">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Gestionar Palabras</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-6">
							<input type="text" id="palabra" class="form-control mb-3" autofocus>
							<p class="mt-3" id="mensajePalabras"></p>
						</div>
						<div class="col-md-6">
							<ul id="listaPalabras"></ul>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<a class="btn btn-primary col-md-4" type="button" id="aniadirPalabra">Añadir palabra</a>
					<a class="btn btn-danger col-md-4" type="button" id="eliminarPalabra">Eliminar selección</a>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal" id="modalVerUsuarios">
		<div class="modal-dialog modal-dialog-centered" style="max-width: 900px;">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Gestionar Usuarios</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body" id="tablaUsuarios">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
					<button type="button" class="btn btn-primary" id="eliminarUsuarios">Eliminar selección</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal" id="modalEstadisticas">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h4 class="modal-title">Ranking de puntuaciones</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body" id="tablaEstadisticas">

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>

	<form method="POST" th:action="@{/logout}">
		<button type="submit">Cerrar sesión</button>
	</form>
</body>

</html>